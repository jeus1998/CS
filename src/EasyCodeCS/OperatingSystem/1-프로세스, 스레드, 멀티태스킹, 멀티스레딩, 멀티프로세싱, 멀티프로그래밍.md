
# 프로세스, 스레드, 멀티태스킹, 멀티스레딩, 멀티프로세싱, 멀티프로그래밍

### 참고 자료 

[쉬운 코드] https://www.youtube.com/watch?v=QmtYKZC0lMU&list=PLcXyemr8ZeoQOtSUjwaer0VMJSMfa-9G-

[내가 예전에 정리한 티스토리] https://20240228.tistory.com/97

### 사전 배경 지식 
- 프로그램(program)
  - 컴퓨터가 실행할 수 있는 명령어들의 집합 
- 프로세스(process)
  - 컴퓨터에서 실행 중인 프로그램 
  - 각각의 프로세스는 독립된 메모리 공간을 할당 받음
  - 명령어들과 데이터를 가진다.
- CPU(central processing unit)
  - 명령어를 실행하는 연산 장치 
- 메인 메모리(main memory)
  - 프로세스가 cpu에서 실행되기 위해 대기하는 곳
  - 프로세스 데이터
  - 실행중인 프로세스도 존재
- IO(input/output)
  - 파일을 읽고 쓰기
  - 네트워크의 어딘가와 데이터를 주고 받는 것
  - 입출력 장치와 데이터를 주고 받는 것

### 단일 프로세스 시스템 

- 한 번에 하나의 프로그램만 실행됨 
- 단점: CPU 사용률이 좋지 않음 

![1.JPG](Image%2F1.JPG)

- 프로세스 실행중에 프로세스가 IO 작업을 하면 CPU에서 하던 작업을 멈추고 IO 작업을 한다.
- CPU는 이때 아무 일도 하지 않고 쉬게 된다. ➡️ CPU 사용률이 좋지 않음 
- ➡️ 멀티 프로그래밍 

### 멀티 프로그래밍(multi programming)

- 단일 프로세스 시스템 해결책 
- 여러 개의 프로그램을 메모리에 올려놓고 동시에 실행 
- 어떤 프로세스가 CPU에서 작업을 하다가 IO 작업이 발생하면 다른 프로세스가 CPU에서 실행 
- CPU 사용률을 극대화 시키는데 목적 

![2.JPG](Image%2F2.JPG)

- 단점: CPU 사용 시간이 길어지면 다른 프로세스는 계속 대기 
- ➡️ 멀티 태스킹 

![3.JPG](Image%2F3.JPG)

### 멀티 태스킹(multitasking)

- 프로세스는 한번 CPU를 사용할 때 아주 짧은 시간(=quantum)만 CPU에서 실행되도록 하자
- ms 단위 
- 프로세스의 응답 시간을 최소화 시키는데 목적 
- 마치 일반 사용자가 느끼는 체감은 여러 프로그램이 동시에 실행되는 느낌 

![4.JPG](Image%2F4.JPG)

남아있는 아쉬움
- 하나의 프로세스가 동시에 여러 작업을 수행하지는 못함 
- 프로세스를 여러 개를 만들어서 실행시키면 프로세스의 프로세스 컨텍스트 스위칭 비용이 발생 
  - 프로세스 컨텍스트 스위칭 비용은 무겁다 
- 프로세스끼리 데이터 공유가 까다로움 (독립된 메모리 공간을 가짐)
- 듀얼 코어가 등장했는데 잘 쓰고 싶음.
- ➡️ 스레드 

### 스레드(thread)

- 프로세스는 1개 이상의 스레드를 가질 수 있다.
- CPU에서 실행되는 단위(unit of execution) 
  - 스레드 등장 전에는 프로세스가 CPU에서 실행되는 단위
- 같은 프로세스의 스레들끼리 컨텍스트 스위칭이 가볍다 
- 스레드들은 자신들이 속한 프로세스의 메모리 영역을 공유 

### 메모리 구조 비교(싱글 스레드 VS 멀티 스레드)

![5.JPG](Image%2F5.JPG)

- 같은 프로세스의 스레드들은 메모리 영역을 공유
- 공유하지 않는 영역: stack, stack pointer, PC(program counter)

### 멀티 스레딩(multithreading)

CPU core 1개
![6.JPG](Image%2F6.JPG)

CPU core 2개 (듀얼 코어)
![7.JPG](Image%2F7.JPG)

- 스레드가 CPU에서 동시에 병렬 처리 된다 ➡️ 멀티 스레딩
- 하나의 프로세스가 동시에 여러 작업을 실행하는데 목적 
- 확장된 멀티태스킹 개념
  - 이전 개념: 프로세스 사이의 아주 짧은 CPU 점유 시간을 통한 컨텍스트 스위칭
  - 현재 개념: 여러 프로세스와 여러 스레드가 아주 짧게 쪼개진 CPU 점유 시간을 나눠 갖는 것

### 멀티 스레딩(multithreading) VS 멀티프로세싱 (multiprocessing)

- 멀티프로세싱
  - 여러 개의 프로세스를 사용하는 방식
  - 독립된 메모리 공간
    - 각 프로세스는 자신만의 메모리 공간을 가지므로, 프로세스 간에 메모리를 공유하지 않는다
    - 프로세스 간의 충돌을 방지하고 안정성을 높이지만, 메모리 사용량이 증가할 수 있다.
  - 병렬성
    - 멀티코어 시스템에서는 각 프로세스가 별도의 CPU 코어에서 병렬로 실행될 수 있어 실제 병렬 처리가 가능
  - 비용
    - 프로세스를 생성하고 관리하는 데 비교적 큰 비용이 든다.(메모리 및 CPU 자원)
- 멀티스레딩
  - 하나의 프로세스 내에서 여러 스레드를 사용하는 방식
  - 공유 메모리
    - 스레드들은 동일한 메모리 공간을 공유한다
    - 스레드 간 통신이 빠르고 효율적이다
    - 이를 잘못 관리하면 동기화 문제나 데이터 충돌이 발생할 수 있다
  - 비용
    - 스레드를 생성하고 관리하는 데 드는 비용이 상대적으로 적다

### 예제

- 싱글 코어 CPU 싱글-스레드 프로세스 2개 
  - 멀티태스킹 ⭕️
  - 멀티스레딩 ❌
  - 멀티프로세싱 ❌
- 싱글 코어 CPU 듀얼-스레드 프로세스 1개 
  - 멀티태스킹 ⭕️
  - 멀티스레딩 ⭕️
  - 멀티프로세싱 ❌
- 듀얼 코어 CPU 싱글-스레드 프로세스 2개 
  - 멀티태스킹 ❌
  - 멀티스레딩 ❌
  - 멀티프로세싱 ⭕️
- 듀얼 코어 CPU 듀얼-스레드 프로세스 1개 
  - 멀티태스킹 ❌
  - 멀티스레딩 ⭕️
  - 멀티프로세싱 ⭕️
- 듀얼 코어 CPU 듀얼-스레드 프로세스 2개 
  - 멀티태스킹 ⭕️
  - 멀티스레딩 ⭕ ️
  - 멀티프로세싱 ⭕️











